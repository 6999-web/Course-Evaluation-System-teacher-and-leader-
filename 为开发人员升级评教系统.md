

你好！

现有学校评教系统为**纯手动评分模式**，需基于学校既定评分标准，集成 **Deepseek API** 将其升级为**自动评分系统**，保留人工复核功能。具体需求如下：

## 一、核心目标

1. 实现 **5类教学文件**（教案、教学反思、教研/听课记录、成绩/学情分析、课件）的自动评分，评分逻辑1:1匹配附件标准。

2. 自动评分与人工抽查复核一致性需 **≥95%**。

3. 减少80%人工评分工作量，同时支持教师异议申请与管理端复核调整。

## 二、核心改造逻辑（手动→自动）

|阶段|原手动流程|改造后自动流程|
|---|---|---|
|1. 考评任务下发|管理员手动发通知，教师线下提交|管理端创建任务（选文件类型、设截止时间）→ 系统自动推送给教师|
|2. 文件提交|零散上传/纸质提交|教师端按任务要求上传对应文件，系统校验类型与完整性|
|3. 评分环节|管理员逐条对照标准打分|**核心：调用Deepseek API自动评分**<br>1. 系统提取文件文本内容<br>2. 按文件类型注入预设提示词模板<br>3. API返回得分、等级、扣分理由<br>4. 系统自动计算加分项，生成最终结果|
|4. 结果复核|人工全量复查|1. 支持随机抽查复核（一致性≥95%）<br>2. 教师提交异议→管理员3个工作日内复核调整|
## 三、技术实现关键要求

### 1. 必须对接Deepseek API，提示词模板是核心

- **提示词模板要求**：需内置 **5类文件** 的标准化模板，每个模板必须包含：

    - 等级划分标准（优秀90-100、良好80-89、合格60-79、不合格＜60）

    - 对应文件的**核心指标**（如教案的4个核心指标）、**专项否决项**

    - 通用一票否决项（造假、师德失范、未提交核心文件）

    - 加分项规则（总分加分≤10分）

    - 固定输出格式（得分明细、否决项校验结果、等级、总结）

- **API调用逻辑**（参考伪代码）

```Python

import requests
def auto_score(file_content, file_type):
    # 1. 根据文件类型获取预设提示词模板
    prompt = get_prompt_template(file_type)
    # 2. 拼接提示词+文件内容
    final_query = prompt + "\n" + file_content
    # 3. 调用Deepseek API，temperature设为0.1（降低随机性）
    response = requests.post(
        url="https://api.deepseek.com/v1/chat/completions",
        headers={"Authorization": "Bearer [你的API-Key]"},
        json={
            "model": "deepseek-chat",
            "messages": [{"role": "user", "content": final_query}],
            "temperature": 0.1
        }
    )
    # 4. 解析返回结果，提取得分、等级、理由
    return parse_response(response.json())
```

### 2. 系统功能模块改造要求

|模块|新增/改造功能|详细需求|
|---|---|---|
|**管理端-考评任务管理**|完善「生成考评表」功能|1. 可选择需上传的文件类型（教案/反思等，支持多选）<br>2. 可配置加分项规则（是否启用、分值上限）<br>3. 可设置截止时间，超时未提交自动触发“一票否决”|
|**管理端-评分规则配置**|新增「提示词模板管理」功能|1. 内置5类文件的标准提示词模板（支持管理员微调指标分值）<br>2. 可配置一票否决项开关|
|**教师端-文件上传**|优化「上传校验」|1. 仅允许上传指定类型文件（docx/pdf/ppt等）<br>2. 上传后显示“待评分”状态，截止时间前可重新上传|
|**核心模块-自动评分引擎**|新增模块|1. 文件解析：支持提取docx/pdf/ppt的文本内容<br>2. 触发条件：教师提交后自动评分，或管理员手动批量触发<br>3. 结果存储：保存API返回的**得分明细、否决项判定、加分项、等级**，支持导出Excel|
|**结果复核模块**|优化「异议处理」|1. 教师端显示评分明细，支持提交异议并填写理由<br>2. 管理端可人工重新评分，覆盖自动结果<br>3. 记录所有调整记录，支持追溯|
### 3. 评分规则必须严格落地（不能有偏差）

1. **否决项优先校验**：先检查是否触发通用/专项否决项，触发则直接判定不合格，不进入指标评分。

2. **核心指标评分**：按文件类型的核心指标打分，总分100分。

3. **加分项计算**：管理员录入教师加分项佐证（获奖、论文等），系统自动加分（≤10分），最终得分=指标得分+加分项得分。

4. **等级自动映射**：根据最终得分匹配等级。

## 四、验收标准

1. **功能验收**：5类文件均可自动评分，否决项触发精准（如无教学目标的教案直接不合格），加分项计算准确。

2. **性能验收**：单文件评分响应时间≤10秒，批量评分（100份）≤10分钟，自动与人工复核一致性≥95%。

3. **兼容性验收**：支持主流文件格式（docx/pdf/ppt），兼容Chrome/Edge/Firefox浏览器，教师端支持移动端查看结果。

## 五、其他注意事项

1. **数据安全**：教师上传的文件需加密存储，权限隔离（教师仅能查看自己的文件和评分结果）。

2. **可扩展性**：预留接口，未来可对接学校成绩系统、获奖公示系统，自动获取加分项数据。

3. **过渡期方案**：建议先“自动评分+人工全复核”试运行1个月，再切换为“自动评分+抽查复核”。

有疑问随时沟通，麻烦优先保证评分规则和学校标准的一致性！
以下是我的deepseekAPI的密钥sk-b6ca926900534f1fa31067d49980ec56